services:
  orchestrator:
    image: "${ORCH_IMAGE:-ghcr.io/andreimarhatau/codex-docker-orchestrator:latest}"
    pull_policy: always
    container_name: codex-orchestrator
    ports:
      - "8080:8080"
    environment:
      HOME: "${HOST_HOME:-/root}"
      ORCH_HOME: "${HOST_HOME:-/root}/.codex-orchestrator"
      DOCKER_HOST: "unix:///var/run/docker.sock"
      TMPDIR: "${ORCH_TMPDIR:-/tmp}"
      GIT_CONFIG_PARAMETERS: "${GIT_CONFIG_PARAMETERS:-credential.helper=!/usr/bin/gh\\ auth\\ git-credential}"
    volumes:
      - ${DOCKER_SOCK:-/var/run/docker.sock}:/var/run/docker.sock
      - ${HOST_HOME:-/root}:${HOST_HOME:-/root}
    user: "${UID:-0}:${GID:-0}"
    group_add:
      - "${DOCKER_GID:-0}"
