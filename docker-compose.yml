services:
  orchestrator:
    image: "${ORCH_IMAGE:-ghcr.io/andreimarhatau/codex-docker-orchestrator:latest}"
    pull_policy: always
    container_name: codex-orchestrator
    ports:
      - "8080:8080"
    environment:
      HOME: "${HOST_HOME:-/root}"
      ORCH_HOME: "${HOST_HOME:-/root}/.codex-orchestrator"
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
      - ${HOST_HOME:-/root}:${HOST_HOME:-/root}
    user: "${UID:-0}:${GID:-0}"
    group_add:
      - "${DOCKER_GID:-0}"
